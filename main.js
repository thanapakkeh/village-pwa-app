const data = [{"house": "399/1", "period": "มี.ค.11", "total": 350}, {"house": "399/2", "period": "มี.ค.11", "total": 350}, {"house": "399/3", "period": "พ.ค.67 - มี.ค.68", "total": 3850}, {"house": "399/4", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/5", "period": "มี.ค.11", "total": 350}, {"house": "399/6", "period": "มี.ค.11", "total": 350}, {"house": "399/7", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/8", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/9", "period": "มี.ค.11", "total": 100}, {"house": "399/10", "period": "มิ.ย.67 - มี.ค.68", "total": 3500}, {"house": "399/11", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/13", "period": "ก.ค.67 - มี.ค.68", "total": 2900}, {"house": "399/14", "period": "ก.ค.67 - มี.ค.68", "total": 2900}, {"house": "399/15", "period": "มี.ค.11", "total": 350}, {"house": "399/16", "period": "มี.ค.11", "total": 350}, {"house": "399/17", "period": "มี.ค.11", "total": 350}, {"house": "399/18", "period": "มี.ค.11", "total": 350}, {"house": "399/19", "period": "ส.ค.67 - มี.ค.68", "total": 2800}, {"house": "399/21", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/22", "period": "มี.ค.11", "total": 350}, {"house": "399/23", "period": "มี.ค.11", "total": 350}, {"house": "399/24", "period": "มี.ค.11", "total": 350}, {"house": "399/25", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/27", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/28", "period": "ธ.ค.67 - มี.ค.68", "total": 1400}, {"house": "399/29", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/30", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/31", "period": "มี.ค.11", "total": 350}, {"house": "399/32", "period": "มี.ค.67 - มี.ค.68", "total": 4550}, {"house": "399/33", "period": "มี.ค.11", "total": 350}, {"house": "399/34", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/35", "period": "พ.ค.67 - มี.ค.68", "total": 3850}, {"house": "399/36", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/37", "period": "มี.ค.11", "total": 350}, {"house": "399/38", "period": "ก.ค.67 - มี.ค.68", "total": 3150}, {"house": "399/39", "period": "มิ.ย.67 - มี.ค.68", "total": 3500}, {"house": "399/40", "period": "มี.ค.11", "total": 100}, {"house": "399/41", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/42", "period": "มี.ค.11", "total": 350}, {"house": "399/43", "period": "มี.ค.11", "total": 350}, {"house": "399/44", "period": "มี.ค.11", "total": 350}, {"house": "399/47", "period": "พ.ย.67 - มี.ค.68", "total": 1500}, {"house": "399/48", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/49", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/50", "period": "มี.ค.11", "total": 350}, {"house": "399/51", "period": "มี.ค.11", "total": 350}, {"house": "399/52", "period": "ก.พ.68 - มี.ค.68", "total": 500}, {"house": "399/53", "period": "ก.ค.67 - มี.ค.68", "total": 2900}, {"house": "399/54", "period": "มี.ค.11", "total": 350}, {"house": "399/55", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/56", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/57", "period": "ก.ย.67 - มี.ค.68", "total": 2450}, {"house": "399/58", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/59", "period": "พ.ค.67 - มี.ค.68", "total": 3850}, {"house": "399/60", "period": "มี.ค.11", "total": 350}, {"house": "399/61", "period": "เม.ย.67 - มี.ค.68", "total": 4100}, {"house": "399/62", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/63", "period": "มี.ค.11", "total": 350}, {"house": "399/64", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/65", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/66", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/67", "period": "พ.ย.67 - มี.ค.68", "total": 1700}, {"house": "399/68", "period": "มี.ค.11", "total": 350}, {"house": "399/69", "period": "เม.ย.67 - มี.ค.68", "total": 4200}, {"house": "399/70", "period": "มี.ค.11", "total": 350}, {"house": "399/71", "period": "มี.ค.11", "total": 350}, {"house": "399/73", "period": "มี.ค.11", "total": 350}, {"house": "399/74", "period": "มี.ค.11", "total": 350}, {"house": "399/75", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/76", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/78", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/79", "period": "เม.ย.67 - มี.ค.68", "total": 4200}, {"house": "399/80", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/81", "period": "มี.ค.11", "total": 350}, {"house": "399/82", "period": "มี.ค.11", "total": 350}, {"house": "399/83", "period": "มี.ค.11", "total": 350}, {"house": "399/84", "period": "มิ.ย.67 - มี.ค.68", "total": 3500}, {"house": "399/87", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/88", "period": "มี.ค.11", "total": 350}, {"house": "399/89", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/90", "period": "ก.ค.67 - มี.ค.68", "total": 3150}, {"house": "399/91", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/92", "period": "มี.ค.11", "total": 350}, {"house": "399/93", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/94", "period": "มี.ค.11", "total": 350}, {"house": "399/95", "period": "มี.ค.11", "total": 350}, {"house": "399/96", "period": "มี.ค.11", "total": 350}, {"house": "399/97", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/98", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/99", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/100", "period": "ธ.ค.67 - มี.ค.68", "total": 1400}, {"house": "399/101", "period": "มี.ค.11", "total": 350}, {"house": "399/102", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/103", "period": "มี.ค.67 - มี.ค.68", "total": 4500}, {"house": "399/104", "period": "มี.ค.11", "total": 350}, {"house": "399/105", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/106", "period": "มี.ค.11", "total": 350}, {"house": "399/107", "period": "ก.ย.67 - มี.ค.68", "total": 2450}, {"house": "399/108", "period": "มี.ค.11", "total": 350}, {"house": "399/110", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/111", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/112", "period": "มี.ค.11", "total": 350}, {"house": "399/113", "period": "มี.ค.11", "total": 350}, {"house": "399/114", "period": "มี.ค.11", "total": 350}, {"house": "399/116", "period": "มี.ค.11", "total": 350}, {"house": "399/117", "period": "ก.พ.68 - มี.ค.68", "total": 500}, {"house": "399/118", "period": "มี.ค.11", "total": 350}, {"house": "399/119", "period": "มี.ค.11", "total": 350}, {"house": "399/120", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/121", "period": "พ.ย.67 - มี.ค.68", "total": 1500}, {"house": "399/122", "period": "ต.ค.67 - มี.ค.68", "total": 2100}, {"house": "399/123", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/124", "period": "มี.ค.11", "total": 350}, {"house": "399/125", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/126", "period": "มี.ค.11", "total": 350}, {"house": "399/127", "period": "มี.ค.11", "total": 350}, {"house": "399/128", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/129", "period": "มี.ค.11", "total": 350}, {"house": "399/131", "period": "มี.ค.11", "total": 350}, {"house": "399/132", "period": "มี.ค.11", "total": 350}, {"house": "399/133", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/135", "period": "มี.ค.11", "total": 350}, {"house": "399/136", "period": "มี.ค.11", "total": 350}, {"house": "399/137", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/138", "period": "มี.ค.11", "total": 350}, {"house": "399/139", "period": "มี.ค.11", "total": 350}, {"house": "399/140", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/141", "period": "มิ.ย.67 - มี.ค.68", "total": 3500}, {"house": "399/142", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/143", "period": "มี.ค.11", "total": 350}, {"house": "399/144", "period": "มี.ค.11", "total": 350}, {"house": "399/145", "period": "ธ.ค.67 - มี.ค.68", "total": 1400}, {"house": "399/146", "period": "ต.ค.67 - มี.ค.68", "total": 2100}, {"house": "399/147", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/148", "period": "มี.ค.11", "total": 350}, {"house": "399/149", "period": "มิ.ย.67 - มี.ค.68", "total": 3500}, {"house": "399/150", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/151", "period": "มี.ค.11", "total": 350}, {"house": "399/152", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/153", "period": "ก.ค.67 - มี.ค.68", "total": 3150}, {"house": "399/154", "period": "มี.ค.11", "total": 350}, {"house": "399/155", "period": "พ.ค.67 - มี.ค.68", "total": 3850}, {"house": "399/156", "period": "ธ.ค.67 - มี.ค.68", "total": 1400}, {"house": "399/157", "period": "มี.ค.11", "total": 350}, {"house": "399/158", "period": "มี.ค.67 - มี.ค.68", "total": 4550}, {"house": "399/159", "period": "มี.ค.11", "total": 350}, {"house": "399/160", "period": "มี.ค.11", "total": 350}, {"house": "399/161", "period": "ก.ย.67 - มี.ค.68", "total": 2450}, {"house": "399/162", "period": "ธ.ค.67 - มี.ค.68", "total": 1300}, {"house": "399/163", "period": "มี.ค.11", "total": 350}, {"house": "399/164", "period": "มี.ค.11", "total": 350}, {"house": "399/165", "period": "มี.ค.11", "total": 350}, {"house": "399/166", "period": "เม.ย.67 - มี.ค.68", "total": 4100}, {"house": "399/167", "period": "มี.ค.11", "total": 350}, {"house": "399/169", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/170", "period": "มี.ค.11", "total": 350}, {"house": "399/171", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/172", "period": "มี.ค.11", "total": 350}, {"house": "399/173", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/174", "period": "ก.ย.67 - มี.ค.68", "total": 2450}, {"house": "399/176", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/177", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/178", "period": "ก.พ.67 - มี.ค.68", "total": 4900}, {"house": "399/180", "period": "มี.ค.11", "total": 350}, {"house": "399/181", "period": "ธ.ค.67 - มี.ค.68", "total": 1400}, {"house": "399/182", "period": "มี.ค.11", "total": 350}, {"house": "399/183", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/184", "period": "มี.ค.11", "total": 350}, {"house": "399/186", "period": "ก.ค.67 - มี.ค.68", "total": 2900}, {"house": "399/187", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/189", "period": "พ.ย.67 - มี.ค.68", "total": 1750}, {"house": "399/190", "period": "มี.ค.11", "total": 350}, {"house": "399/192", "period": "มี.ค.11", "total": 350}, {"house": "399/193", "period": "ต.ค.67 - มี.ค.68", "total": 2100}, {"house": "399/194", "period": "ก.ค.67 - มี.ค.68", "total": 2900}, {"house": "399/195", "period": "มี.ค.11", "total": 350}, {"house": "399/196", "period": "มี.ค.11", "total": 350}, {"house": "399/197", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/198", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/199", "period": "ธ.ค.67 - มี.ค.68", "total": 1400}, {"house": "399/200", "period": "มี.ค.11", "total": 350}, {"house": "399/201", "period": "มี.ค.11", "total": 350}, {"house": "399/202", "period": "มี.ค.11", "total": 350}, {"house": "399/204", "period": "มี.ค.11", "total": 350}, {"house": "399/205", "period": "มี.ค.11", "total": 350}, {"house": "399/206", "period": "มี.ค.11", "total": 350}, {"house": "399/207", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/208", "period": "มี.ค.11", "total": 350}, {"house": "399/209", "period": "มี.ค.11", "total": 350}, {"house": "399/210", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/211", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/212", "period": "พ.ค.67 - มี.ค.68", "total": 3850}, {"house": "399/213", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/214", "period": "ต.ค.67 - มี.ค.68", "total": 2100}, {"house": "399/215", "period": "มี.ค.11", "total": 350}, {"house": "399/217", "period": "มี.ค.11", "total": 350}, {"house": "399/218", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/219", "period": "ส.ค.67 - มี.ค.68", "total": 2500}, {"house": "399/220", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/221", "period": "มี.ค.11", "total": 350}, {"house": "399/222", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/223", "period": "มี.ค.11", "total": 350}, {"house": "399/224", "period": "ก.พ.68 - มี.ค.68", "total": 500}, {"house": "399/225", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/226", "period": "ม.ค.67 - มี.ค.68", "total": 5300}, {"house": "399/227", "period": "มี.ค.11", "total": 350}, {"house": "399/228", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/229", "period": "มี.ค.11", "total": 350}, {"house": "399/230", "period": "มี.ค.11", "total": 350}, {"house": "399/231", "period": "มี.ค.11", "total": 350}, {"house": "399/232", "period": "มี.ค.11", "total": 350}, {"house": "399/234", "period": "มี.ค.11", "total": 350}, {"house": "399/235", "period": "มี.ค.11", "total": 350}, {"house": "399/236", "period": "พ.ย.67 - มี.ค.68", "total": 1750}, {"house": "399/237", "period": "มี.ค.11", "total": 350}, {"house": "399/238", "period": "เม.ย.67 - มี.ค.68", "total": 4200}, {"house": "399/239", "period": "มี.ค.11", "total": 350}, {"house": "399/240", "period": "ต.ค.67 - มี.ค.68", "total": 2100}, {"house": "399/241", "period": "มี.ค.11", "total": 350}, {"house": "399/242", "period": "ส.ค.67 - มี.ค.68", "total": 2800}, {"house": "399/243", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/244", "period": "มี.ค.11", "total": 350}, {"house": "399/245", "period": "มี.ค.67 - มี.ค.68", "total": 4550}, {"house": "399/246", "period": "มี.ค.11", "total": 350}, {"house": "399/247", "period": "เม.ย.67 - มี.ค.68", "total": 4100}, {"house": "399/248", "period": "ธ.ค.67 - มี.ค.68", "total": 1350}, {"house": "399/250", "period": "ธ.ค.67 - มี.ค.68", "total": 1400}, {"house": "399/251", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/252", "period": "ต.ค.67 - มี.ค.68", "total": 2100}, {"house": "399/253", "period": "มี.ค.11", "total": 350}, {"house": "399/254", "period": "มี.ค.11", "total": 350}, {"house": "399/255", "period": "มี.ค.11", "total": 350}, {"house": "399/256", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/257", "period": "มี.ค.11", "total": 350}, {"house": "399/258", "period": "มี.ค.11", "total": 350}, {"house": "399/259", "period": "มี.ค.11", "total": 350}, {"house": "399/260", "period": "มี.ค.11", "total": 350}, {"house": "399/261", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/262", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/263", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/264", "period": "มี.ค.11", "total": 350}, {"house": "399/265", "period": "ต.ค.67 - มี.ค.68", "total": 2100}, {"house": "399/266", "period": "มี.ค.11", "total": 350}, {"house": "399/267", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/268", "period": "มี.ค.11", "total": 350}, {"house": "399/269", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/270", "period": "มี.ค.11", "total": 350}, {"house": "399/272", "period": "มี.ค.11", "total": 350}, {"house": "399/274", "period": "มี.ค.11", "total": 350}, {"house": "399/275", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/276", "period": "ม.ค.68 - มี.ค.68", "total": 1050}, {"house": "399/277", "period": "ก.พ.68 - มี.ค.68", "total": 700}, {"house": "399/278", "period": "เม.ย.67 - มี.ค.68", "total": 4200}];

document.body.style = "margin:0;font-family:sans-serif;background:#f9fafb;color:#111;";

const user = JSON.parse(localStorage.getItem("loggedInUser"));
const root = document.getElementById("root");
root.style = "min-height:100vh;display:flex;justify-content:center;align-items:center;flex-direction:column;padding:20px;";

if (!user) {
  root.innerHTML = "<p>กรุณาเข้าสู่ระบบก่อนใช้งาน</p>";
} else {
  const found = data.find((item) => item.house === user.house);
  root.innerHTML = `
    <h1 style="font-size:1.5rem;margin-bottom:1rem;">🔍 ข้อมูลค่าส่วนกลางของคุณ</h1>
    <div style='background:white;border-radius:10px;padding:16px;box-shadow:0 2px 8px rgba(0,0,0,0.1);text-align:left;max-width:350px;width:100%;'>
      <p>🏠 <strong>บ้านเลขที่:</strong> ${found.house}</p>
      <p>🗓️ <strong>ช่วงค้างชำระ:</strong> ${found.period}</p>
      <p>💰 <strong>ยอดรวมค้างชำระ:</strong> ${found.total.toLocaleString()} บาท</p>
      <button onclick="download('${found.house}', '${found.period}', ${found.total})" style='margin-top:10px;padding:8px 16px;background:#10b981;color:white;border:none;border-radius:5px;cursor:pointer;'>📥 ดาวน์โหลดใบแจ้งหนี้</button>
      <hr style='margin:20px 0;' />
      <button onclick="logout()" style='padding:8px 16px;background:#ef4444;color:white;border:none;border-radius:5px;cursor:pointer;'>🚪 ออกจากระบบ</button>
    </div>
  `;
}

window.download = function (house, period, total) {
  const text = `ใบแจ้งหนี้\nบ้านเลขที่: ${house}\nช่วงค้างชำระ: ${period}\nยอดรวม: ${total} บาท`;
  const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = `ใบแจ้งหนี้_${house}.txt`;
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
};

window.logout = function () {
  localStorage.removeItem("loggedInUser");
  window.location.href = "login.html";
};
